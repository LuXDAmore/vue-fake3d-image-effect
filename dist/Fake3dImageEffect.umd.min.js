(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["Fake3dImageEffect"]=e():t["Fake3dImageEffect"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({2264:function(t,e,i){"use strict";var n=i("2f0c"),a=i.n(n);a.a},"2f0c":function(t,e,i){},f6fd:function(t,e){(function(t){var e="currentScript",i=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(n){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(t in i)if(i[t].src==e||"interactive"==i[t].readyState)return i[t];return null}}})})(document)},fb15:function(t,e,i){"use strict";var n;(i.r(e),"undefined"!==typeof window)&&(i("f6fd"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(i.p=n[1]));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(t.tag,{tag:"component",class:t.classes,style:t.styles},[i("div",{ref:"gl",staticClass:"fake3d-image-effect__image",attrs:{"data-image-original":t.image,"data-image-depth":t.imageMap,"data-horizontal-threshold":t.horizontal,"data-vertical-threshold":t.vertical}}),t.$slots.overlay||t.$scopedSlots.overlay?i("div",{staticClass:"fake3d-image-effect__overlay"},[t._t("overlay")],2):t._e(),t.$slots.default||t.$scopedSlots.default?i("div",{class:t.contentClasses},[t._t("default",null,{init:t.init})],2):t._e(),t.$slots.footer||t.$scopedSlots.footer?i("div",{staticClass:"fake3d-image-effect__footer"},[t._t("footer")],2):t._e()])},o=[];function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var s="fake3d-image-effect",l={name:s,inheritAttrs:!1,props:{tag:{type:String,default:"section"},image:{type:String,required:!0},imageMap:{type:String,required:!0},horizontal:{type:[Number,String],default:18},vertical:{type:[Number,String],default:23},centered:{type:Boolean,default:!1},fillHeightContent:{type:Boolean,default:!1},width:{type:String,default:"100%"},height:{type:String,default:"100vh"}},computed:{classes:function(){var t=[s];return this.centered&&t.push("".concat(s,"--centered")),t},contentClasses:function(){var t="".concat(s,"__content"),e=[t];return this.fillHeightContent&&e.push("".concat(t,"--fill-height")),e},styles:function(){return{width:this.width,height:this.height}}},mounted:function(){this.$nextTick(this.init)},methods:{init:function(){var t=this.$refs.gl;try{!function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==r(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="js/",i(i.s=0)}([function(e,i,n){Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=s(n(1)),r=s(n(2));function s(t){return t&&t.__esModule?t:{default:t}}var l=new(s(n(3)).default.GyroNorm),c=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas),this.gl=this.canvas.getContext("webgl"),this.ratio=window.devicePixelRatio,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.mouseX=0,this.mouseY=0,this.mouseTargetX=0,this.mouseTargetY=0,this.imageOriginal=this.container.getAttribute("data-image-original"),this.imageDepth=this.container.getAttribute("data-image-depth"),this.vth=this.container.getAttribute("data-vertical-threshold"),this.hth=this.container.getAttribute("data-horizontal-threshold"),this.imageURLs=[this.imageOriginal,this.imageDepth],this.textures=[],this.startTime=(new Date).getTime(),this.createScene(),this.addTexture(),this.mouseMove(),this.gyro()}return a(e,[{key:"addShader",value:function(t,e){var i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))throw new Error("Shader compile error: "+this.gl.getShaderInfoLog(i));this.gl.attachShader(this.program,i)}},{key:"resizeHandler",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.canvas.width=this.width*this.ratio,this.canvas.height=this.height*this.ratio,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px";var t=void 0,e=void 0;this.height/this.width<this.imageAspect?(t=1,e=this.height/this.width/this.imageAspect):(t=this.width/this.height*this.imageAspect,e=1),this.uResolution.set(this.width,this.height,t,e),this.uRatio.set(1/this.ratio),this.uThreshold.set(this.hth,this.vth),this.gl.viewport(0,0,this.width*this.ratio,this.height*this.ratio)}},{key:"resize",value:function(){this.resizeHandler(),window.addEventListener("resize",this.resizeHandler.bind(this))}},{key:"createScene",value:function(){this.program=this.gl.createProgram(),this.addShader(r.default,this.gl.VERTEX_SHADER),this.addShader(o.default,this.gl.FRAGMENT_SHADER),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),this.uResolution=new h("resolution","4f",this.program,this.gl),this.uMouse=new h("mouse","2f",this.program,this.gl),this.uTime=new h("time","1f",this.program,this.gl),this.uRatio=new h("pixelRatio","1f",this.program,this.gl),this.uThreshold=new h("threshold","2f",this.program,this.gl),this.billboard=new d(this.gl),this.positionLocation=this.gl.getAttribLocation(this.program,"a_position"),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0)}},{key:"addTexture",value:function(){this.gl,function(t,e){for(var i=[],n=t.length,a=function(){0===--n&&e(i)},o=0;o<n;++o){var r=u(t[o],a);i.push(r)}}(this.imageURLs,this.start.bind(this))}},{key:"start",value:function(t){var e=this.gl;this.imageAspect=t[0].naturalHeight/t[0].naturalWidth;for(var i=0;i<t.length;i++){var n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t[i]),this.textures.push(n)}var a=this.gl.getUniformLocation(this.program,"image0"),o=this.gl.getUniformLocation(this.program,"image1");this.gl.uniform1i(a,0),this.gl.uniform1i(o,1),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[0]),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[1]),this.resize(),this.render()}},{key:"gyro",value:function(){var t=this;this.maxTilt=15,l.init({gravityNormalized:!0}).then((function(){l.start((function(e){var i=e.do.gamma,n=e.do.beta;t.mouseTargetY=m(n,-t.maxTilt,t.maxTilt)/t.maxTilt,t.mouseTargetX=-m(i,-t.maxTilt,t.maxTilt)/t.maxTilt}))})).catch((function(t){console.error("not supported")}))}},{key:"mouseMove",value:function(){var t=this;document.addEventListener("mousemove",(function(e){var i=t.windowWidth/2,n=t.windowHeight/2;t.mouseTargetX=(i-e.clientX)/i,t.mouseTargetY=(n-e.clientY)/n}))}},{key:"render",value:function(){var t=((new Date).getTime()-this.startTime)/1e3;this.uTime.set(t),this.mouseX+=.05*(this.mouseTargetX-this.mouseX),this.mouseY+=.05*(this.mouseTargetY-this.mouseY),this.uMouse.set(this.mouseX,this.mouseY),this.billboard.render(this.gl),requestAnimationFrame(this.render.bind(this))}}]),e}();function u(t,e){var i=new Image;return i.src=t,i.crossOrigin=!0,i.onerror=function(){throw new TypeError("Cannot load image",i)},i.onload=e,i}function h(t,e,i,n){this.name=t,this.suffix=e,this.gl=n,this.program=i,this.location=n.getUniformLocation(i,t)}function d(t){var e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,d.verts,t.STATIC_DRAW)}function m(t,e,i){return t==t&&(void 0!==i&&(t=t<=i?t:i),void 0!==e&&(t=t>=e?t:e)),t}i.default=c,h.prototype.set=function(){for(var t="uniform"+this.suffix,e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];var a=[this.location].concat(i);this.gl[t].apply(this.gl,a)},d.verts=new Float32Array([-1,-1,1,-1,-1,1,1,1]),d.prototype.render=function(t){t.drawArrays(t.TRIANGLE_STRIP,0,4)},new c},function(t,e){t.exports="#ifdef GL_ES\n  precision mediump float;\n#define GLSLIFY 1\n#endif\n\nuniform vec4 resolution;\nuniform vec2 mouse;\nuniform vec2 threshold;\nuniform float time;\nuniform float pixelRatio;\nuniform sampler2D image0;\nuniform sampler2D image1;\n\n\nvec2 mirrored(vec2 v) {\n  vec2 m = mod(v,2.);\n  return mix(m,2.0 - m, step(1.0 ,m));\n}\n\nvoid main() {\n  // uvs and textures\n  vec2 uv = pixelRatio*gl_FragCoord.xy / resolution.xy ;\n  vec2 vUv = (uv - vec2(0.5))*resolution.zw + vec2(0.5);\n  vUv.y = 1. - vUv.y;\n  vec4 tex1 = texture2D(image1,mirrored(vUv));\n  // tex1.r = 1. - tex1.r;\n  // tex1.r = tex1.r*tex1.r;\n  vec2 fake3d = vec2(vUv.x + (tex1.r - 0.5)*mouse.x/threshold.x, vUv.y + (tex1.r - 0.5)*mouse.y/threshold.y);\n  vec4 tex0 = texture2D(image0,mirrored(fake3d));\n  \n\n\n  gl_FragColor = vec4(uv,0.,1.);\n  gl_FragColor = tex0;\n}"},function(t,e){t.exports="#define GLSLIFY 1\nattribute vec2 a_position;\n\nvoid main() {\n  gl_Position = vec4( a_position, 0, 1 );\n}"},function(t,e,i){var n,a;"function"==typeof Symbol&&Symbol.iterator,function(t){function e(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1}function i(t){return new Promise((function(e,i){!function n(a){setTimeout((function(){t&&t.data?e():a>=20?i():n(++a)}),50)}(0)}))}function n(){m=d?(t.screen.orientation.angle||0)*c:(t.orientation||0)*c}function a(t){for(var e in h.orientation.data=t,h.orientation.callbacks)h.orientation.callbacks[e].call(this)}function o(t){for(var e in h.motion.data=t,h.motion.callbacks)h.motion.callbacks[e].call(this)}if(void 0===t.FULLTILT||null===t.FULLTILT){var r=Math.PI,s=r/2,l=2*r,c=r/180,u=180/r,h={orientation:{active:!1,callbacks:[],data:void 0},motion:{active:!1,callbacks:[],data:void 0}},d=!(!t.screen||!t.screen.orientation||void 0===t.screen.orientation.angle||null===t.screen.orientation.angle),m=(d?t.screen.orientation.angle:t.orientation||0)*c,f=s,v=r,g=l/3,p=-s,y={version:"0.5.3",getDeviceOrientation:function(t){return new Promise((function(e,n){var a=new y.DeviceOrientation(t);a.start(),new i(h.orientation).then((function(){a._alphaAvailable=h.orientation.data.alpha&&null!==h.orientation.data.alpha,a._betaAvailable=h.orientation.data.beta&&null!==h.orientation.data.beta,a._gammaAvailable=h.orientation.data.gamma&&null!==h.orientation.data.gamma,e(a)})).catch((function(){a.stop(),n("DeviceOrientation is not supported")}))}))},getDeviceMotion:function(t){return new Promise((function(e,n){var a=new y.DeviceMotion(t);a.start(),new i(h.motion).then((function(){a._accelerationXAvailable=h.motion.data.acceleration&&h.motion.data.acceleration.x,a._accelerationYAvailable=h.motion.data.acceleration&&h.motion.data.acceleration.y,a._accelerationZAvailable=h.motion.data.acceleration&&h.motion.data.acceleration.z,a._accelerationIncludingGravityXAvailable=h.motion.data.accelerationIncludingGravity&&h.motion.data.accelerationIncludingGravity.x,a._accelerationIncludingGravityYAvailable=h.motion.data.accelerationIncludingGravity&&h.motion.data.accelerationIncludingGravity.y,a._accelerationIncludingGravityZAvailable=h.motion.data.accelerationIncludingGravity&&h.motion.data.accelerationIncludingGravity.z,a._rotationRateAlphaAvailable=h.motion.data.rotationRate&&h.motion.data.rotationRate.alpha,a._rotationRateBetaAvailable=h.motion.data.rotationRate&&h.motion.data.rotationRate.beta,a._rotationRateGammaAvailable=h.motion.data.rotationRate&&h.motion.data.rotationRate.gamma,e(a)})).catch((function(){a.stop(),n("DeviceMotion is not supported")}))}))},Quaternion:function(t,i,n,a){var o;this.set=function(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=n||1},this.copy=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},this.setFromEuler=function(){var t,e,i,n,a,o,r,s,l,u,h,d;return function(m){return i=((m=m||{}).alpha||0)*c,t=(m.beta||0)*c,e=(m.gamma||0)*c,o=i/2,n=t/2,a=e/2,r=Math.cos(n),s=Math.cos(a),l=Math.cos(o),u=Math.sin(n),h=Math.sin(a),d=Math.sin(o),this.set(u*s*l-r*h*d,r*h*l+u*s*d,r*s*d+u*h*l,r*s*l-u*h*d),this.normalize(),this}}(),this.setFromRotationMatrix=function(){var t;return function(i){return t=i.elements,this.set(.5*Math.sqrt(1+t[0]-t[4]-t[8])*e(t[7]-t[5]),.5*Math.sqrt(1-t[0]+t[4]-t[8])*e(t[2]-t[6]),.5*Math.sqrt(1-t[0]-t[4]+t[8])*e(t[3]-t[1]),.5*Math.sqrt(1+t[0]+t[4]+t[8])),this}}(),this.multiply=function(t){return o=y.Quaternion.prototype.multiplyQuaternions(this,t),this.copy(o),this},this.rotateX=function(t){return o=y.Quaternion.prototype.rotateByAxisAngle(this,[1,0,0],t),this.copy(o),this},this.rotateY=function(t){return o=y.Quaternion.prototype.rotateByAxisAngle(this,[0,1,0],t),this.copy(o),this},this.rotateZ=function(t){return o=y.Quaternion.prototype.rotateByAxisAngle(this,[0,0,1],t),this.copy(o),this},this.normalize=function(){return y.Quaternion.prototype.normalize(this)},this.set(t,i,n,a)}};y.Quaternion.prototype={constructor:y.Quaternion,multiplyQuaternions:function(){var t=new y.Quaternion;return function(e,i){var n=e.x,a=e.y,o=e.z,r=e.w,s=i.x,l=i.y,c=i.z,u=i.w;return t.set(n*u+r*s+a*c-o*l,a*u+r*l+o*s-n*c,o*u+r*c+n*l-a*s,r*u-n*s-a*l-o*c),t}}(),normalize:function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w);return 0===e?(t.x=0,t.y=0,t.z=0,t.w=1):(e=1/e,t.x*=e,t.y*=e,t.z*=e,t.w*=e),t},rotateByAxisAngle:function(){var t,e,i=new y.Quaternion,n=new y.Quaternion;return function(a,o,r){return t=(r||0)/2,e=Math.sin(t),n.set((o[0]||0)*e,(o[1]||0)*e,(o[2]||0)*e,Math.cos(t)),i=y.Quaternion.prototype.multiplyQuaternions(a,n),y.Quaternion.prototype.normalize(i)}}()},y.RotationMatrix=function(t,e,i,n,a,o,r,s,l){var u;this.elements=new Float32Array(9),this.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},this.set=function(t,e,i,n,a,o,r,s,l){this.elements[0]=t||1,this.elements[1]=e||0,this.elements[2]=i||0,this.elements[3]=n||0,this.elements[4]=a||1,this.elements[5]=o||0,this.elements[6]=r||0,this.elements[7]=s||0,this.elements[8]=l||1},this.copy=function(t){this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8]},this.setFromEuler=function(){var t,e,i,n,a,o,r,s,l;return function(u){return i=((u=u||{}).alpha||0)*c,t=(u.beta||0)*c,e=(u.gamma||0)*c,n=Math.cos(t),a=Math.cos(e),o=Math.cos(i),r=Math.sin(t),s=Math.sin(e),l=Math.sin(i),this.set(o*a-l*r*s,-n*l,a*l*r+o*s,a*l+o*r*s,o*n,l*s-o*a*r,-n*s,r,n*a),this.normalize(),this}}(),this.setFromQuaternion=function(){var t,e,i,n;return function(a){return t=a.w*a.w,e=a.x*a.x,i=a.y*a.y,n=a.z*a.z,this.set(t+e-i-n,2*(a.x*a.y-a.w*a.z),2*(a.x*a.z+a.w*a.y),2*(a.x*a.y+a.w*a.z),t-e+i-n,2*(a.y*a.z-a.w*a.x),2*(a.x*a.z-a.w*a.y),2*(a.y*a.z+a.w*a.x),t-e-i+n),this}}(),this.multiply=function(t){return u=y.RotationMatrix.prototype.multiplyMatrices(this,t),this.copy(u),this},this.rotateX=function(t){return u=y.RotationMatrix.prototype.rotateByAxisAngle(this,[1,0,0],t),this.copy(u),this},this.rotateY=function(t){return u=y.RotationMatrix.prototype.rotateByAxisAngle(this,[0,1,0],t),this.copy(u),this},this.rotateZ=function(t){return u=y.RotationMatrix.prototype.rotateByAxisAngle(this,[0,0,1],t),this.copy(u),this},this.normalize=function(){return y.RotationMatrix.prototype.normalize(this)},this.set(t,e,i,n,a,o,r,s,l)},y.RotationMatrix.prototype={constructor:y.RotationMatrix,multiplyMatrices:function(){var t,e,i=new y.RotationMatrix;return function(n,a){return t=n.elements,e=a.elements,i.set(t[0]*e[0]+t[1]*e[3]+t[2]*e[6],t[0]*e[1]+t[1]*e[4]+t[2]*e[7],t[0]*e[2]+t[1]*e[5]+t[2]*e[8],t[3]*e[0]+t[4]*e[3]+t[5]*e[6],t[3]*e[1]+t[4]*e[4]+t[5]*e[7],t[3]*e[2]+t[4]*e[5]+t[5]*e[8],t[6]*e[0]+t[7]*e[3]+t[8]*e[6],t[6]*e[1]+t[7]*e[4]+t[8]*e[7],t[6]*e[2]+t[7]*e[5]+t[8]*e[8]),i}}(),normalize:function(t){var e=t.elements,i=e[0]*e[4]*e[8]-e[0]*e[5]*e[7]-e[1]*e[3]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6];return e[0]/=i,e[1]/=i,e[2]/=i,e[3]/=i,e[4]/=i,e[5]/=i,e[6]/=i,e[7]/=i,e[8]/=i,t.elements=e,t},rotateByAxisAngle:function(){var t,e,i=new y.RotationMatrix,n=new y.RotationMatrix,a=!1;return function(o,r,s){return n.identity(),a=!1,t=Math.sin(s),e=Math.cos(s),1===r[0]&&0===r[1]&&0===r[2]?(a=!0,n.elements[4]=e,n.elements[5]=-t,n.elements[7]=t,n.elements[8]=e):1===r[1]&&0===r[0]&&0===r[2]?(a=!0,n.elements[0]=e,n.elements[2]=t,n.elements[6]=-t,n.elements[8]=e):1===r[2]&&0===r[0]&&0===r[1]&&(a=!0,n.elements[0]=e,n.elements[1]=-t,n.elements[3]=t,n.elements[4]=e),a?(i=y.RotationMatrix.prototype.multiplyMatrices(o,n),i=y.RotationMatrix.prototype.normalize(i)):i=o,i}}()},y.Euler=function(t,e,i){this.set=function(t,e,i){this.alpha=t||0,this.beta=e||0,this.gamma=i||0},this.copy=function(t){this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma},this.setFromRotationMatrix=function(){var t,e,i,n;return function(a){(t=a.elements)[8]>0?(e=Math.atan2(-t[1],t[4]),i=Math.asin(t[7]),n=Math.atan2(-t[6],t[8])):t[8]<0?(e=Math.atan2(t[1],-t[4]),i=-Math.asin(t[7]),i+=i>=0?-r:r,n=Math.atan2(t[6],-t[8])):t[6]>0?(e=Math.atan2(-t[1],t[4]),i=Math.asin(t[7]),n=-s):t[6]<0?(e=Math.atan2(t[1],-t[4]),i=-Math.asin(t[7]),i+=i>=0?-r:r,n=-s):(e=Math.atan2(t[3],t[0]),i=t[7]>0?s:-s,n=0),0>e&&(e+=l),e*=u,i*=u,n*=u,this.set(e,i,n)}}(),this.setFromQuaternion=function(){var t,e,i;return function(n){var a=n.w*n.w,o=n.x*n.x,c=n.y*n.y,h=n.z*n.z,d=a+o+c+h,m=n.w*n.x+n.y*n.z;if(m>.499999*d)t=2*Math.atan2(n.y,n.w),e=s,i=0;else if((1e-6-.5)*d>m)t=-2*Math.atan2(n.y,n.w),e=-s,i=0;else{var f=a-o+c-h,v=2*(n.w*n.z-n.x*n.y),g=a-o-c+h,p=2*(n.w*n.y-n.x*n.z);g>0?(t=Math.atan2(v,f),e=Math.asin(2*m/d),i=Math.atan2(p,g)):(t=Math.atan2(-v,-f),e=-Math.asin(2*m/d),e+=0>e?r:-r,i=Math.atan2(-p,-g))}0>t&&(t+=l),t*=u,e*=u,i*=u,this.set(t,e,i)}}(),this.rotateX=function(t){return y.Euler.prototype.rotateByAxisAngle(this,[1,0,0],t),this},this.rotateY=function(t){return y.Euler.prototype.rotateByAxisAngle(this,[0,1,0],t),this},this.rotateZ=function(t){return y.Euler.prototype.rotateByAxisAngle(this,[0,0,1],t),this},this.set(t,e,i)},y.Euler.prototype={constructor:y.Euler,rotateByAxisAngle:function(){var t=new y.RotationMatrix;return function(e,i,n){return t.setFromEuler(e),t=y.RotationMatrix.prototype.rotateByAxisAngle(t,i,n),e.setFromRotationMatrix(t),e}}()},y.DeviceOrientation=function(e){this.options=e||{};var i=0,n=0;if(this.alphaOffsetScreen=0,this.alphaOffsetDevice=void 0,"game"===this.options.type){var a=function(e){return null!==e.alpha&&(this.alphaOffsetDevice=new y.Euler(e.alpha,0,0),this.alphaOffsetDevice.rotateZ(-m),++n>=10)?void t.removeEventListener("deviceorientation",a,!1):void(++i>=200&&t.removeEventListener("deviceorientation",a,!1))}.bind(this);t.addEventListener("deviceorientation",a,!1)}else if("world"===this.options.type){var o=function(e){return!0!==e.absolute&&void 0!==e.webkitCompassAccuracy&&null!==e.webkitCompassAccuracy&&+e.webkitCompassAccuracy>=0&&+e.webkitCompassAccuracy<50&&(this.alphaOffsetDevice=new y.Euler(e.webkitCompassHeading,0,0),this.alphaOffsetDevice.rotateZ(m),this.alphaOffsetScreen=m,++n>=10)?void t.removeEventListener("deviceorientation",o,!1):void(++i>=200&&t.removeEventListener("deviceorientation",o,!1))}.bind(this);t.addEventListener("deviceorientation",o,!1)}},y.DeviceOrientation.prototype={constructor:y.DeviceOrientation,start:function(e){e&&"[object Function]"==Object.prototype.toString.call(e)&&h.orientation.callbacks.push(e),d?t.screen.orientation.addEventListener("change",n,!1):t.addEventListener("orientationchange",n,!1),h.orientation.active||(t.addEventListener("deviceorientation",a,!1),h.orientation.active=!0)},stop:function(){h.orientation.active&&(t.removeEventListener("deviceorientation",a,!1),h.orientation.active=!1)},listen:function(t){this.start(t)},getFixedFrameQuaternion:function(){var t=new y.Euler,e=new y.RotationMatrix,i=new y.Quaternion;return function(){var n=h.orientation.data||{alpha:0,beta:0,gamma:0},a=n.alpha;return this.alphaOffsetDevice&&(e.setFromEuler(this.alphaOffsetDevice),e.rotateZ(-this.alphaOffsetScreen),t.setFromRotationMatrix(e),t.alpha<0&&(t.alpha+=360),t.alpha%=360,a-=t.alpha),t.set(a,n.beta,n.gamma),i.setFromEuler(t),i}}(),getScreenAdjustedQuaternion:function(){var t;return function(){return(t=this.getFixedFrameQuaternion()).rotateZ(-m),t}}(),getFixedFrameMatrix:function(){var t=new y.Euler,e=new y.RotationMatrix;return function(){var i=h.orientation.data||{alpha:0,beta:0,gamma:0},n=i.alpha;return this.alphaOffsetDevice&&(e.setFromEuler(this.alphaOffsetDevice),e.rotateZ(-this.alphaOffsetScreen),t.setFromRotationMatrix(e),t.alpha<0&&(t.alpha+=360),t.alpha%=360,n-=t.alpha),t.set(n,i.beta,i.gamma),e.setFromEuler(t),e}}(),getScreenAdjustedMatrix:function(){var t;return function(){return(t=this.getFixedFrameMatrix()).rotateZ(-m),t}}(),getFixedFrameEuler:function(){var t,e=new y.Euler;return function(){return t=this.getFixedFrameMatrix(),e.setFromRotationMatrix(t),e}}(),getScreenAdjustedEuler:function(){var t,e=new y.Euler;return function(){return t=this.getScreenAdjustedMatrix(),e.setFromRotationMatrix(t),e}}(),isAbsolute:function(){return!(!h.orientation.data||!0!==h.orientation.data.absolute)},getLastRawEventData:function(){return h.orientation.data||{}},_alphaAvailable:!1,_betaAvailable:!1,_gammaAvailable:!1,isAvailable:function(t){switch(t){case this.ALPHA:return this._alphaAvailable;case this.BETA:return this._betaAvailable;case this.GAMMA:return this._gammaAvailable}},ALPHA:"alpha",BETA:"beta",GAMMA:"gamma"},y.DeviceMotion=function(t){this.options=t||{}},y.DeviceMotion.prototype={constructor:y.DeviceMotion,start:function(e){e&&"[object Function]"==Object.prototype.toString.call(e)&&h.motion.callbacks.push(e),d?t.screen.orientation.addEventListener("change",n,!1):t.addEventListener("orientationchange",n,!1),h.motion.active||(t.addEventListener("devicemotion",o,!1),h.motion.active=!0)},stop:function(){h.motion.active&&(t.removeEventListener("devicemotion",o,!1),h.motion.active=!1)},listen:function(t){this.start(t)},getScreenAdjustedAcceleration:function(){var t=h.motion.data&&h.motion.data.acceleration?h.motion.data.acceleration:{x:0,y:0,z:0},e={};switch(m){case f:e.x=-t.y,e.y=t.x;break;case v:e.x=-t.x,e.y=-t.y;break;case g:case p:e.x=t.y,e.y=-t.x;break;default:e.x=t.x,e.y=t.y}return e.z=t.z,e},getScreenAdjustedAccelerationIncludingGravity:function(){var t=h.motion.data&&h.motion.data.accelerationIncludingGravity?h.motion.data.accelerationIncludingGravity:{x:0,y:0,z:0},e={};switch(m){case f:e.x=-t.y,e.y=t.x;break;case v:e.x=-t.x,e.y=-t.y;break;case g:case p:e.x=t.y,e.y=-t.x;break;default:e.x=t.x,e.y=t.y}return e.z=t.z,e},getScreenAdjustedRotationRate:function(){var t=h.motion.data&&h.motion.data.rotationRate?h.motion.data.rotationRate:{alpha:0,beta:0,gamma:0},e={};switch(m){case f:e.beta=-t.gamma,e.gamma=t.beta;break;case v:e.beta=-t.beta,e.gamma=-t.gamma;break;case g:case p:e.beta=t.gamma,e.gamma=-t.beta;break;default:e.beta=t.beta,e.gamma=t.gamma}return e.alpha=t.alpha,e},getLastRawEventData:function(){return h.motion.data||{}},_accelerationXAvailable:!1,_accelerationYAvailable:!1,_accelerationZAvailable:!1,_accelerationIncludingGravityXAvailable:!1,_accelerationIncludingGravityYAvailable:!1,_accelerationIncludingGravityZAvailable:!1,_rotationRateAlphaAvailable:!1,_rotationRateBetaAvailable:!1,_rotationRateGammaAvailable:!1,isAvailable:function(t){switch(t){case this.ACCELERATION_X:return this._accelerationXAvailable;case this.ACCELERATION_Y:return this._accelerationYAvailable;case this.ACCELERATION_Z:return this._accelerationZAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_X:return this._accelerationIncludingGravityXAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_Y:return this._accelerationIncludingGravityYAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_Z:return this._accelerationIncludingGravityZAvailable;case this.ROTATION_RATE_ALPHA:return this._rotationRateAlphaAvailable;case this.ROTATION_RATE_BETA:return this._rotationRateBetaAvailable;case this.ROTATION_RATE_GAMMA:return this._rotationRateGammaAvailable}},ACCELERATION_X:"accelerationX",ACCELERATION_Y:"accelerationY",ACCELERATION_Z:"accelerationZ",ACCELERATION_INCLUDING_GRAVITY_X:"accelerationIncludingGravityX",ACCELERATION_INCLUDING_GRAVITY_Y:"accelerationIncludingGravityY",ACCELERATION_INCLUDING_GRAVITY_Z:"accelerationIncludingGravityZ",ROTATION_RATE_ALPHA:"rotationRateAlpha",ROTATION_RATE_BETA:"rotationRateBeta",ROTATION_RATE_GAMMA:"rotationRateGamma"},t.FULLTILT=y}}(window),a={GyroNorm:function(){function t(t){return Math.round(t*Math.pow(10,A))/Math.pow(10,A)}function e(){var e={};e=x?f.getScreenAdjustedEuler():f.getFixedFrameEuler();var i=v.getScreenAdjustedAcceleration(),a=v.getScreenAdjustedAccelerationIncludingGravity(),o=v.getScreenAdjustedRotationRate(),r=0;r=y===n?0>(r=e.alpha-u)?360-Math.abs(r):r:e.alpha;var s={do:{alpha:t(r),beta:t(e.beta),gamma:t(e.gamma),absolute:f.isAbsolute()},dm:{x:t(i.x),y:t(i.y),z:t(i.z),gx:t(a.x),gy:t(a.y),gz:t(a.z),alpha:t(o.alpha),beta:t(o.beta),gamma:t(o.gamma)}};return p&&(s.dm.gx*=h,s.dm.gy*=h,s.dm.gz*=h),s}function i(t){b&&("string"==typeof t&&(t={message:t,code:0}),b(t))}var n="game",a="world",o="deviceorientation",r="acceleration",s="accelerationinludinggravity",l="rotationrate",c=null,u=0,h=0,d=!1,m=!1,f=null,v=null,g=50,p=!0,y=n,A=2,b=null,x=!1,_=function(t){};return _.GAME=n,_.WORLD=a,_.DEVICE_ORIENTATION=o,_.ACCELERATION=r,_.ACCELERATION_INCLUDING_GRAVITY=s,_.ROTATION_RATE=l,_.prototype.init=function(t){t&&t.frequency&&(g=t.frequency),t&&t.gravityNormalized&&(p=t.gravityNormalized),t&&t.orientationBase&&(y=t.orientationBase),t&&"number"==typeof t.decimalCount&&t.decimalCount>=0&&(A=parseInt(t.decimalCount)),t&&t.logger&&(b=t.logger),t&&t.screenAdjusted&&(x=t.screenAdjusted);var e=new FULLTILT.getDeviceOrientation({type:y}).then((function(t){f=t})),i=(new FULLTILT.getDeviceMotion).then((function(t){h=(v=t).getScreenAdjustedAccelerationIncludingGravity().z>0?-1:1}));return Promise.all([e,i]).then((function(){m=!0}))},_.prototype.end=function(){try{m=!1,this.stop(),v.stop(),f.stop()}catch(t){i(t)}},_.prototype.start=function(t){return m?(c=setInterval((function(){t(e())}),g),void(d=!0)):void i({message:'GyroNorm is not initialized yet. First call the "init()" function.',code:1})},_.prototype.stop=function(){c&&(clearInterval(c),d=!1)},_.prototype.normalizeGravity=function(t){p=!!t},_.prototype.setHeadDirection=function(){return!x&&y!==a&&(u=f.getFixedFrameEuler().alpha,!0)},_.prototype.startLogging=function(t){t&&(b=t)},_.prototype.stopLogging=function(){b=null},_.prototype.isAvailable=function(t){var e=f.getScreenAdjustedEuler(),i=v.getScreenAdjustedAcceleration(),n=v.getScreenAdjustedAccelerationIncludingGravity(),a=v.getScreenAdjustedRotationRate();switch(t){case o:return e.alpha&&null!==e.alpha&&e.beta&&null!==e.beta&&e.gamma&&null!==e.gamma;case r:return i&&i.x&&i.y&&i.z;case s:return n&&n.x&&n.y&&n.z;case l:return a&&a.alpha&&a.beta&&a.gamma;default:return{deviceOrientationAvailable:e.alpha&&null!==e.alpha&&e.beta&&null!==e.beta&&e.gamma&&null!==e.gamma,accelerationAvailable:i&&i.x&&i.y&&i.z,accelerationIncludingGravityAvailable:n&&n.x&&n.y&&n.z,rotationRateAvailable:a&&a.alpha&&a.beta&&a.gamma}}},_.prototype.isRunning=function(){return d},_}()},void 0===(n=function(){return a}.call(e,i,e,t))||(t.exports=n)}])}catch(e){console.error({e:e})}}}},c=l;i("2264");function u(t,e,i,n,a,o,r,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),r?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):a&&(l=s?function(){a.call(this,this.$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}var h=u(c,a,o,!1,null,"a8267002",null),d=h.exports,m={Fake3dImageEffect:d,install:function(t){t.component(d.name,d)}},f=m;"undefined"!==typeof window&&window.Vue&&window.Vue.use(m);e["default"]=f}})["default"]}));